<font size='18'>
 <a href='../index.html'>Home</a>
 </font>
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="Tinghui WANG" name="Author"/>
<link href="/images/realdigital.ico" rel="icon" type="image/x-icon"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Welcome to Real Digital</title>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css" rel="stylesheet"/>
<link href="/build/realdigital.c5563abade9aec1d0accf0b1c31118b8.css" rel="stylesheet"/>
<link href="/build/css/app.381c5c1b85ba6633fac439a6eb0ba6f4.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-52236215-2', 'auto');
        ga('send', 'pageview');
    </script>
</link></link></head>
<body class="doc-page">

<div class="wrapper">
<div class="main main-raised">
<article class="container-fluid">
<div class="row">
<div class="col col-main-content" id="doc-main-content">

<div>
<div class="title-box">
<h1>Project
                                    5.2
                                            SR-Latches and D-Latch
            </h1>
<h2>Basic Cells of Sequential Circuits</h2>
</div>
<div class="row mt-3">
<div class="col text-left">
<a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license">
<img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" style="border-width:0"/>
</a>
</div>
<div class="col text-right">
<i class="fa fa-eye"></i>
                543
            </div>
</div>
</div>
<h2 data-source-line="1" id="introduction">Introduction</h2>
<p data-source-line="2">Latches are the fundamental bi-stable memory circuit in digital systems to store data and indicate the state of the system. In this project, we are going to implement and simulate the basic NAND cell of an SR-Latch and see how it functions.</p>
<div class="row"><div class="col-md-6"><h4 id="before-you-begin-you-should">Before you begin, you should:</h4>
<ul>
<li>Have Real Digital®’s Blackboard set up;</li>
<li>Have the Xilinx® Vivado WebPACK™ installed;</li>
<li>Download <a class="btn btn-sm btn-warning" href="/downloads/3f4ceaee772ee5bbd654cf96f936de90.pdf"><strong>Submission Form 5</strong></a> <a class="btn btn-sm btn-warning" href="/downloads/e13cc24ee1827193ed75ae8eea9e847b.pdf"><strong>Problem Set 5</strong></a>;</li>
<li>Be able to describe digital circuit using logic operators;</li>
<li>Be able to write test bench and simulate circuit using the Vivado Simulator;</li>
<li>Be able to model and simulate circuit delay.</li>
</ul>
</div><div class="col-lg-6 col-md-6 col-sm-12"><h4 id="after-youre-done-you-should">After you’re done, you should:</h4>
<ul>
<li>Understand the operations of an SR-Latch;</li>
<li>Understand metastability of bi-stable circuit;</li>
<li>Understand the difference between NAND cell and NOR cell.</li>
</ul>
</div></div><h2 data-source-line="22" id="background">Background</h2>
<div class="row"><div class="col-md-9"><p>Figure 1 below shows an implementation for SR-Latch with NAND implementation. According to the truth table on the right, S and R are active low. When only S is asserted (S is ‘0’), the output Q is SET to ‘1’. When only R is asserted (R is ‘0’), the output Q is RESET to ‘0’. When neither S and R are asserted, the output holds its previous value.</p>
</div><div class="col-lg-3 col-md-6 col-sm-12"><ul>
<li><a class="btn btn-group-justified btn-sm btn-success" href="/doc/8ee36c2a5221c0c118aa3d363c4f1df4"><strong>Latches</strong></a></li>
</ul>
</div></div><figure data-source-line="32"><img alt="Figure 1. SR-Latch NAND cell" src="../images/d31037e6f25d14e6da9a303f8d291659.svg"/><figcaption>Figure 1. SR-Latch NAND cell</figcaption></figure>
<p data-source-line="34">SR-Latch is a kind of bi-stable circuit. However, due to propagation delay of NAND gate, it is possible to drive the circuit into metastable state, where the output is oscillating between 0 and 1. The metastable state will be triggered when neither the set operation nor the reset operation propagates through the whole cell before the cell changes to the hold state.</p>
<h2 data-source-line="36" id="step-1-implement-the-circuit-in-verilog">Step 1: Implement the Circuit in Verilog</h2>
<p data-source-line="37">Assume the NAND gates in SR-Latch have a delay of 1 ns.You may want to try to create the verilog file without looking at the example code, you can write the code based on figure 1 NAND cell and then check your work by clicking <mark>Show/Hide Code</mark>. The Verilog file for the SR-Latch looks like follows:
<button class="btn btn-sm btn-grey" data-target="#demo1" data-toggle="collapse" type="button"><strong><strong>Show/Hide Code</strong></strong></button></p>
<div class="collapse" id="demo1">
<pre><code class="hljs language-verilog"><span class="hljs-meta">`<span class="hljs-meta-keyword">timescale</span> 1ns / 1ps</span>
<span class="hljs-keyword">module</span> sr_latch(
    <span class="hljs-keyword">input</span> S,
    <span class="hljs-keyword">input</span> R,
    <span class="hljs-keyword">output</span> Q,
    <span class="hljs-keyword">output</span> Qn
    );

<span class="hljs-keyword">wire</span> Q_int, Qn_int;

<span class="hljs-keyword">assign</span> #<span class="hljs-number">1</span> Q_int = ~(S &amp; Qn_int);
<span class="hljs-keyword">assign</span> #<span class="hljs-number">1</span> Qn_int = ~(R &amp; Q_int);
<span class="hljs-keyword">assign</span> Q = Q_int;
<span class="hljs-keyword">assign</span> Qn = Qn_int;

<span class="hljs-keyword">endmodule</span>
</code></pre>
</div>
<h2 data-source-line="61" id="step-2-create-a-test-bench-for-the-and-cell-sr-latch">Step 2: Create a Test Bench for the AND Cell SR-Latch</h2>
<p data-source-line="63">For the purpose of demonstrating the functionality of SR-Latch, we consider the following input simulus:</p>
<table class="table table-striped" data-source-line="64">
<thead>
<tr>
<th><strong>Time</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0ns</td>
<td>De-assert both inputs</td>
</tr>
<tr>
<td>100ns</td>
<td>Assert <code>S</code></td>
</tr>
<tr>
<td>200ns</td>
<td>De-assert <code>S</code></td>
</tr>
<tr>
<td>300ns</td>
<td>Assert <code>R</code></td>
</tr>
<tr>
<td>400ns</td>
<td>De-assert <code>R</code></td>
</tr>
<tr>
<td>500ns</td>
<td>Assert both inputs</td>
</tr>
<tr>
<td>600ns</td>
<td>De-assert both inputs</td>
</tr>
<tr>
<td>700ns</td>
<td>Assert both inputs</td>
</tr>
</tbody>
</table>
<p data-source-line="76">The code in the test bench looks as follows:</p>
<pre><code class="hljs language-verilog"><span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span>
    <span class="hljs-comment">// Initialize Inputs</span>
    S = <span class="hljs-number">1</span>;
    R = <span class="hljs-number">1</span>;

    <span class="hljs-comment">// Add stimulus here</span>
    #<span class="hljs-number">100</span> S = <span class="hljs-number">0</span>;
    #<span class="hljs-number">100</span> S = <span class="hljs-number">1</span>;
    #<span class="hljs-number">100</span> R = <span class="hljs-number">0</span>;
    #<span class="hljs-number">100</span> R = <span class="hljs-number">1</span>;
    #<span class="hljs-number">100</span> S = <span class="hljs-number">0</span>;
         R = <span class="hljs-number">0</span>;
    #<span class="hljs-number">100</span> S = <span class="hljs-number">1</span>;
         R = <span class="hljs-number">1</span>;
    #<span class="hljs-number">100</span> S = <span class="hljs-number">0</span>;
         R = <span class="hljs-number">0</span>;
    #<span class="hljs-number">100</span> ;
<span class="hljs-keyword">end</span>
</code></pre>
<h2 data-source-line="99" id="requirements">Requirements</h2>
<h3 data-source-line="100" id="1-simulate-the-and-cell-sr-latch"><i aria-hidden="true" class="fa fa-check-square-o"></i> 1. Simulate the AND Cell SR-Latch</h3>
<p data-source-line="101">Simulate your test bench that you created in Step 2. Figure 2 below shows the simulated waveform of the circuit; at 300 ns, Reset signal is asserted. From the zoomed-in graph on the left, it takes 2 ns for Reset operation to propagate through the NAND cell. At 600 ns, both S and R toggles from 0 to 1, resulting in a change between an unfinished SET/RESET operation directly to hold state, which finally triggers an astable state (usually referred as meta-stability).</p>
<figure data-source-line="103"><img alt="Figure 2. SR-Latch simulation waveform. (Screenshot above is from the Vivado Simulator running on Microsoft Windows 10. Altered to enhance visual understanding.)" src="../images/4e1c3e146161ab79071c032f4a3cf692.png"/><figcaption>Figure 2. SR-Latch simulation waveform. (Screenshot above is from the Vivado Simulator running on Microsoft Windows 10. Altered to enhance visual understanding.)</figcaption></figure>
<h3 data-source-line="105" id="2-simulate-the-nor-cell-sr-latch"><i aria-hidden="true" class="fa fa-check-square-o"></i> 2. Simulate the NOR Cell SR-Latch</h3>
<p data-source-line="106">Implement an SR-Latch using NOR Cell and simulate the NOR cell and see if you get a similar waveform as in Requirement 1.</p>
<h3 data-source-line="108" id="3-simulate-the-following-sequence"><i aria-hidden="true" class="fa fa-check-square-o"></i> 3. Simulate the Following Sequence</h3>
<p data-source-line="109">Simulate the following input sequence on both a NAND cell and a NOR cell. Complete the following table (this table is also in your problem set 5, fill it out there) by placing the correct letter in the output column:</p>
<p data-source-line="111">A. Set operation</p>
<p data-source-line="113">B. Reset operation</p>
<p data-source-line="115">C. Confounded outputs (both outputs at the same voltage)</p>
<p data-source-line="117">D. Storing a value in memory</p>
<p data-source-line="119">E. A metastable state</p>
<table class="table table-striped" data-source-line="120">
<thead>
<tr>
<th><strong>Time</strong></th>
<th><strong>SET</strong></th>
<th><strong>RESET</strong></th>
<th><strong>NAND Cell</strong></th>
<th><strong>NOR Cell</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>100ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
<tr>
<td>200ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
<tr>
<td>300ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
<tr>
<td>400ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
<tr>
<td>500ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
<tr>
<td>600ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
<tr>
<td>700ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
<tr>
<td>800ns</td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \rightarrow 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">→</span><span class="mord mathrm">1</span></span></span></span></eq></td>
<td><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \rightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">→</span><span class="mord mathrm">0</span></span></span></span></eq></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 data-source-line="132" id="4-create-and-simulate-a-d-latch"><i aria-hidden="true" class="fa fa-check-square-o"></i> 4. Create and Simulate a D-Latch</h3>
<p data-source-line="133">Implement a D-Latch displayed in Fig. 3 below. Simulate it and try to drive it into a metastable state. Refer to the background section for more information about D-latches.</p>
<div class="row"><div class="col-md-7"><blockquote>
<h4 class="bq-title" id="hint">Hint</h4>
<p>An SR-Latch is driven into metastability by issuing a store operation before a set or reset operation is finished. Similarly, the D-Latch can be driven into stability by issuing a latching operation before the new data is updated to the D-Latch.</p>
</blockquote>
</div><div class="col-lg-5"><figure><img alt="Figure 3. D-Latch" src="../images/935ac359937d077cc7499f95696f215f.svg"/><figcaption>Figure 3. D-Latch</figcaption></figure>
</div></div><h2 data-source-line="146" id="next-project-clock-dividers"><i aria-hidden="true" class="fa fa-sign-out"></i> Next Project: Clock Dividers</h2>
<p data-source-line="147">If you are confident in doing this porject, go ahead and continue with the next <a class="btn btn-sm btn-default" href="/doc/87771169bd95f521963e03a1f9a27dad"><strong>PROJECT 5.3: Clock Dividers</strong></a> for some extra practice!</p>
</div>
<div class="col col-toc">
<nav class="sticky-top sticky" id="doc-toc">
</nav>
</div>
</div>
</article>
</div>
<div aria-hidden="true" aria-labelledby="imagePreview" class="modal fade" id="docImagePreviewModal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg" role="document" style="max-width: 80vw;">

</div>
</div>
</div>
<footer class="page-footer center-on-small-only">
<div class="container-fluid">
<div class="footer-copyright">
            Copyright © 2018 realdigital.org. All Rights Reserved.<br/>
            Documents licensed <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license">CC SA 4.0</a>.
        </div>
</div>
</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js" type="text/javascript"></script>
<script src="/build/manifest.d41d8cd98f00b204e980.js" type="text/javascript"></script>
<script src="/build/realdigital.de4335d491c4f4582d5e.js" type="text/javascript"></script>
<script src="/build/js/app.b4b1f84db5840c3f9f81.js" type="text/javascript"></script>
<script>new WOW().init();</script>
</body>
</html>
