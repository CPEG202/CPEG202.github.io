<font size='18'>
 <a href='../index.html'>Home</a>
 </font>
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="Tinghui WANG" name="Author"/>
<link href="/images/realdigital.ico" rel="icon" type="image/x-icon"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Welcome to Real Digital</title>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css" rel="stylesheet"/>
<link href="/build/realdigital.c5563abade9aec1d0accf0b1c31118b8.css" rel="stylesheet"/>
<link href="/build/css/app.381c5c1b85ba6633fac439a6eb0ba6f4.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-52236215-2', 'auto');
        ga('send', 'pageview');
    </script>
</link></link></head>
<body class="doc-page">

<div class="wrapper">
<div class="main main-raised">
<article class="container-fluid">
<div class="row">
<div class="col col-main-content" id="doc-main-content">

<div>
<div class="title-box">
<h1>Project
                                    3.1
                                            Majority of Five
            </h1>
<h2>Logic Minimization</h2>
</div>
<div class="row mt-3">
<div class="col text-left">
<a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license">
<img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" style="border-width:0"/>
</a>
</div>
<div class="col text-right">
<i class="fa fa-eye"></i>
                884
            </div>
</div>
</div>
<h2 data-source-line="1" id="introduction">Introduction</h2>
<p data-source-line="2">Say you have a voting system with 5 voters. Say they won if a majority of the voters voted yes. How could you find out if there was a majority win? The logic is fairly simple and will be used in this project. Any time there are three or more of the five who vote yes, then there is a majority and the LED needs to turn on.</p>
<div class="row"><div class="col-md-6"><h4 id="before-you-begin-you-should">Before you begin, you should:</h4>
<ul>
<li>Have Real Digital®’s Blackboard set up;</li>
<li>Have the Xilinx® Vivado WebPACK™ installed;</li>
<li>Be able to define a logic circuit using a truth table;</li>
<li>Understand how to add a Verilog HDL file and write a XDC file;</li>
<li>Be able to derive a logic equation from a truth table;</li>
<li>Be able to describe logic functions using Verilog HDL and implement them on your Blackboard;</li>
<li>Get familiar with <a class="btn btn-sm btn-primary" href="https://www.realdigital.org/doc/467498beab847d9c7668cb472212960d "><strong>General Project Submission Policy</strong></a>;</li>
<li>Download <em>Combinational Logic: Logic Minimization</em> module’s:
<a class="btn btn-sm btn-orange" href="/downloads/f01b5c3e8d85a8851d795ac8eaebd368.pdf"><strong>Submission Form 3</strong></a> <a class="btn btn-sm btn-orange" href="/downloads/ee51b2383c2f32c1c871367f25ede0b1.pdf"><strong>Problem Set 3</strong></a></li>
</ul>
</div><div class="col-lg-6 col-md-6 col-sm-12"><h4 id="after-youre-done-you-should">After you’re done, you should:</h4>
<ul>
<li>Understand and be able to use Boolean Algebra;</li>
<li>Know how to create a K-Map from a truth table;</li>
<li>Know how to create minimized logic equation using K-map;</li>
<li>Know how to run a Verilog Circuit Simulation.</li>
</ul>
</div></div><h2 data-source-line="25" id="background">Background</h2>
<div class="row"><div class="col-md-7"><p>If a truth table is completed for the logic equation, it is a fairly easy step to get a maxterm equation and simplify it with an entered variable K-map. Knowing how to use and read a K-map is a fundamental step in creating a digital circuit with minimum transistors and no redundancies.:</p>
</div><div class="col-lg-5 col-md-6 col-sm-12"><ul>
<li><a class="btn btn-sm btn-success" href="https://www.realdigital.org/doc/9fec89522c07324db87f6709136a3a11"><strong>Introduction to Logic Minimization</strong></a></li>
<li><a class="btn btn-sm btn-success" href="https://www.realdigital.org/doc/ff5cb20ca4b92baab3cfa4b69453ed25"><strong>Boolean Algebra</strong></a></li>
<li><a class="btn btn-sm btn-success" href="/doc/2e2349ab3c0a218f6fe0081e2188a38d"><strong>Introduction to K-maps</strong></a></li>
<li><a class="btn btn-sm btn-success" href="/doc/0a169bdf19ab521bbdaa7d60894e05d8"><strong>K-maps with don’t cares</strong></a></li>
<li><a class="btn btn-sm btn-success" href="/doc/45fb5de1eb6d83e51779a4e8d71a918f"><strong>k-maps with entered variables</strong></a></li>
<li><a class="btn btn-sm btn-success" href="/doc/bc9e2e5a44f2b47a2056e8eddc3d0636"><strong>k-maps with multiple outputs</strong></a></li>
<li><a class="btn btn-sm btn-success" href="https://www.realdigital.org/doc/8cbea7048e5e404ff9b6448fb0198dd0"><strong>computer based logic minimum</strong></a></li>
</ul>
</div></div><h2 data-source-line="41" id="step-1-define-top-module-and-ios">Step 1: Define Top Module and I/Os</h2>
<p data-source-line="42">In this project, we are going to utilize 5 switches as inputs and an LED as an output. The LED will illuminate whenever the majority of voters vote yes.</p>
<p data-source-line="44">An example of the module and I/O declaration for Verilog file is shown as follows:</p>
<pre><code class="hljs language-verilog"><span class="hljs-keyword">module</span> majority_of_five(
    <span class="hljs-keyword">input</span> [<span class="hljs-number">4</span>:<span class="hljs-number">0</span>] sw,
    <span class="hljs-keyword">output</span> led
);
</code></pre>
<h2 data-source-line="52" id="step-2-construct-a-minimum-logic-expression-from-the-truth-table-using-k-map">Step 2: Construct a Minimum Logic Expression From the Truth Table Using K-Map</h2>
<h3 data-source-line="54" id="describe-the-problem-using-kmap">Describe the Problem Using KMap</h3>
<p data-source-line="57">Assume that there are 5 people (A, B, C, D, and E). If three or more of them vote yes, represented by a “1”, the result is 1. Using this information, fill in a K-map to represent the logic expression. It should result in a super K-map as displayed in Fig. 1 below. The K-map below is not exactly the same as the one you will get for the majority of 5 problem.</p>
<figure data-source-line="59"><img alt="Figure 1. Truth Table Presented in a Super K-Map" src="../images/87e225b5d81f5856f8f4a810ea4a10da.svg"/><figcaption>Figure 1. Truth Table Presented in a Super K-Map</figcaption></figure>
<h3 data-source-line="61" id="compress-the-super-k-map">Compress the Super K-Map</h3>
<p data-source-line="63">It is pretty difficult to loop a super K-map, so we need to compress it in order to make looping plausible.</p>
<figure data-source-line="65"><img alt="Figure 2. Compress the Super K-Map with Entered Variables" src="../images/b4a6fdc160c1a2662d4ae62d6a5f9409.svg"/><figcaption>Figure 2. Compress the Super K-Map with Entered Variables</figcaption></figure>
<h3 data-source-line="67" id="loop-the-compressed-k-map">Loop the Compressed K-Map</h3>
<p data-source-line="68">Now that the K-map has been compressed, it is time to loop it. There is only one variable E here, so we consider loops with the entered variable E first. You can compare your loop result to the graph below in Fig. 3. You should have six loops to correspond to the six product terms.</p>
<figure data-source-line="70"><img alt="Figure 3. SOP loops with entered variable E" src="../images/eb38d714044d104ac703e3c5f04e20db.svg"/><figcaption>Figure 3. SOP loops with entered variable E</figcaption></figure>
<p data-source-line="72">Now that we have covered the cells with variable E, it is time to see if all of the information in the K-map is looped. By looking at the K-map, we can see that there are a few more loops that we need to create. The column partition of the cell with the value ‘1’ is not covered by a loop in the previous step. In order to create a fully looped K-map these cells need to be looped. You may check your loops with the graph below in Fig. 4. There should be 4 loops corresponding with the 4 product terms.</p>
<figure data-source-line="74"><img alt="Figure 4. SOP loops with the value 1" src="../images/8d2bd0ba69855bc088ea607495ca4237.svg"/><figcaption>Figure 4. SOP loops with the value 1</figcaption></figure>
<p data-source-line="76">From the logic diagram that you have created it is now possible to construct the logic expression in SOP form as follows:</p>
<p data-source-line="78"><eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>=</mo><mi>A</mi><mo>⋅</mo><mi>B</mi><mo>⋅</mo><mi>C</mi><mo>+</mo><mi>A</mi><mo>⋅</mo><mi>B</mi><mo>⋅</mo><mi>D</mi><mo>+</mo><mi>A</mi><mo>⋅</mo><mi>C</mi><mo>⋅</mo><mi>D</mi><mo>+</mo><mi>B</mi><mo>⋅</mo><mi>C</mi><mo>⋅</mo><mi>D</mi><mo>+</mo><mi>A</mi><mo>⋅</mo><mi>B</mi><mo>⋅</mo><mi>E</mi><mo>+</mo><mi>A</mi><mo>⋅</mo><mi>D</mi><mo>⋅</mo><mi>E</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">Y=A \cdot B \cdot C + A \cdot B \cdot D +A \cdot C \cdot D +B \cdot C \cdot D + A \cdot B \cdot E + A \cdot D \cdot E +</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">Y</span><span class="mrel">=</span><span class="mord mathit">A</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mbin">+</span><span class="mord mathit">A</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mbin">+</span><span class="mord mathit">A</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mbin">+</span><span class="mord mathit">A</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mbin">+</span><span class="mord mathit">A</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord">+</span></span></span></span></eq>
<eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>⋅</mo><mi>C</mi><mo>⋅</mo><mi>E</mi><mo>+</mo><mi>B</mi><mo>⋅</mo><mi>C</mi><mo>⋅</mo><mi>E</mi><mo>+</mo><mi>C</mi><mo>⋅</mo><mi>D</mi><mo>⋅</mo><mi>E</mi><mo>+</mo><mi>B</mi><mo>⋅</mo><mi>D</mi><mo>⋅</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">A \cdot C \cdot E +B \cdot C \cdot E + C \cdot D \cdot E +B \cdot D \cdot E</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord mathit">A</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mbin">⋅</span><span class="mord mathit" style="margin-right:0.05764em;">E</span></span></span></span></eq></p>
<h3 data-source-line="81" id="describe-the-circuit-using-verilog">Describe the Circuit Using Verilog</h3>
<p data-source-line="83">From this SOP equation you can build a simple assign statement to control the LED wire. The following code uses “&amp;” as the symbol for logic AND and “|” as the symbol for logic OR. This uses “assign” statements, which were discussed in-depth in prior projects. The “assign” statement and the LED will be held at logic high whenever the combinational logic statement is true.</p>
<pre><code class="hljs language-verilog"><span class="hljs-keyword">assign</span> led = (sw[<span class="hljs-number">0</span>] &amp; sw[<span class="hljs-number">1</span>] &amp; sw[<span class="hljs-number">2</span>]) | <span class="hljs-comment">//ABC</span>
             (sw[<span class="hljs-number">0</span>] &amp; sw[<span class="hljs-number">1</span>] &amp; sw[<span class="hljs-number">3</span>]) | <span class="hljs-comment">//ABD</span>
             (sw[<span class="hljs-number">0</span>] &amp; sw[<span class="hljs-number">2</span>] &amp; sw[<span class="hljs-number">3</span>]) | <span class="hljs-comment">//ACD</span>
             (sw[<span class="hljs-number">1</span>] &amp; sw[<span class="hljs-number">2</span>] &amp; sw[<span class="hljs-number">3</span>]) | <span class="hljs-comment">//BCD</span>
             (sw[<span class="hljs-number">0</span>] &amp; sw[<span class="hljs-number">1</span>] &amp; sw[<span class="hljs-number">4</span>]) | <span class="hljs-comment">//ABE</span>
             (sw[<span class="hljs-number">0</span>] &amp; sw[<span class="hljs-number">3</span>] &amp; sw[<span class="hljs-number">4</span>]) | <span class="hljs-comment">//ADE</span>
             (sw[<span class="hljs-number">0</span>] &amp; sw[<span class="hljs-number">2</span>] &amp; sw[<span class="hljs-number">4</span>]) | <span class="hljs-comment">//ACE</span>
             (sw[<span class="hljs-number">1</span>] &amp; sw[<span class="hljs-number">2</span>] &amp; sw[<span class="hljs-number">4</span>]) | <span class="hljs-comment">//BCE</span>
             (sw[<span class="hljs-number">2</span>] &amp; sw[<span class="hljs-number">3</span>] &amp; sw[<span class="hljs-number">4</span>]) | <span class="hljs-comment">//CDE</span>
             (sw[<span class="hljs-number">1</span>] &amp; sw[<span class="hljs-number">3</span>] &amp; sw[<span class="hljs-number">4</span>]);  <span class="hljs-comment">//BDE</span>
</code></pre>
<h2 data-source-line="98" id="step-3-verify-the-circuit-in-simulator">Step 3: Verify the Circuit in Simulator</h2>
<p data-source-line="99">How can we tell if a complex logic block is working as expected? Well, we need to test it in all possible use cases and verify the circuit outputs against the specifications. Before we run synthesize and implementation with our Verilog code, we can write another Verilog file, usually knwon as test bench, to drive the inputs of the circuit we implemented. A program, called simulator, will read the test bench, simulate the circuit behavior, and generates outputs of the circuit we want to test. Then, we match those outputs with expected values to ensure our circuit works exactly as we expected under all circumstances.</p>
<p data-source-line="101">In this step, we are going to guide you through the steps to write a test bench in Verilog.</p>
<h3 data-source-line="103" id="edit-simulation-sources">Edit Simulation Sources</h3>
<div class="row"><div class="col-md-5"><p>To add a test bench file, you will need to right click on <mark>Simulation Sources</mark> and click <mark>Edit Simulation Sets</mark>.</p>
</div><div class="col-lg-7 col-md-6 col-sm-12"><figure><img alt="Figure 5. Edit Simulation Sets" src="../images/a404b053441b97c880383c8fda13cb69.png"/><figcaption>Figure 5. Edit Simulation Sets</figcaption></figure>
</div></div><h3 data-source-line="116" id="create-simulation-file">Create Simulation File</h3>
<div class="row"><div class="col-md-5"><p>When the window opens click <mark>Create file</mark>, and name the file <code>majority_of_five_test_fixture</code>.</p>
</div><div class="col-lg-7 col-md-6 col-sm-12"><figure><img alt="Figure 6. Add File to Simulation" src="../images/a60987539e455b92bd058a0c82b5bd8e.png"/><figcaption>Figure 6. Add File to Simulation</figcaption></figure>
</div></div><h3 data-source-line="130" id="edit-simulation-file">Edit Simulation File</h3>
<div class="row"><div class="col-md-5"><p>Once the file is created it will be under the Simulation Sources section of the project manager sources tab. Expand this section and double click the file you just created. The file will contain a template for a module. You can delete everything in this file, we will write the test fixture ourselves.</p>
</div><div class="col-lg-7 col-md-6 col-sm-12"><figure><img alt="Figure 7. Project Manager After Adding Test Fixture File" src="../images/83e0ca84d1974312cf1f7ebff9c59d6b.png"/><figcaption>Figure 7. Project Manager After Adding Test Fixture File</figcaption></figure>
</div></div><h3 data-source-line="143" id="time-scale">Time Scale</h3>
<p data-source-line="145">The first line of the test fixture should contain the timescale. You may recognize this line from the other Verilog files you have created.</p>
<pre><code class="hljs language-verilog"><span class="hljs-meta">`<span class="hljs-meta-keyword">timescale</span> 1ns/1ps;</span>
</code></pre>
<p data-source-line="149">The <code>'timescale</code> compiler directive defines reference time and time precision used by simulator. The code above defines that 1 ns is the reference time unit, and 1 ps is the time precision. A delay command like <code>#50</code> represents a delay for 50 referene time unit (50 ns in this case). The smallest time representation in a delay command is 1 ps or 0.001 ns. If you put <code>#0.000234</code>, the simulator will treat it as 0 ns, as the time specified in this delay command is smaller than the time precision defined by <code>'timescale</code> compiler directive.</p>
<h3 data-source-line="150" id="declare-a-test-bench-module">Declare a Test Bench Module</h3>
<p data-source-line="151">Test bench looks just like a typical Verilog module, but artificially manipulates the inputs of the circuit under test (CUT) and examine how CUT behaves.</p>
<p data-source-line="153">Usually, you can name the test bench module to match the simulation file we created. In this case, we name it <code>majority_of_five_test_fixture</code>. The next two lines after the module declaraction define the internal signals that will be connected to the inputs and outputs of the circuit we are interested in testing. Unlike the <em>majorityoffive</em> circuit that was built as a synthesizable Verilog module, a test bench is a module that has no input or output ports. It only has internal signals that are connected to inputs and outputs of CUT, and generates inputs for the CUT and senses the outputs of the CUT to verify that the CUT is implemented as specified.</p>
<pre><code class="hljs language-verilog"><span class="hljs-keyword">module</span> majority_of_five_test_fixture;

    <span class="hljs-comment">// Inputs</span>
    <span class="hljs-keyword">reg</span> [<span class="hljs-number">4</span>:<span class="hljs-number">0</span>] sw;
    <span class="hljs-comment">// Outputs</span>
    <span class="hljs-keyword">wire</span> led;
</code></pre>
<h3 data-source-line="164" id="instantiate-cut-in-the-test-bench">Instantiate CUT in the Test Bench</h3>
<p data-source-line="166">Next we need to instantiate the <code>majority_of_five</code> module that we are testing in the test bench. The following codes instantiate a <code>majority_of_five</code> circuit module, called <code>uut</code> (stands for unit under test), in the test fixture. The input port sw of the <code>majority_of_five</code> module is connected to an internal register called sw as declared in the previous step, the output port led is connected to the wire led. Later projects will go into further detail on instantiation.</p>
<pre><code class="hljs language-verilog"><span class="hljs-comment">// Instantiate the Unit Under Test (UUT)</span>
    majority_of_five uut (
        <span class="hljs-variable">.sw</span>(sw),
        <span class="hljs-variable">.led</span>(led)
    );
</code></pre>
<h3 data-source-line="175" id="generate-the-stimuli-in-the-test-bench">Generate the Stimuli in the Test Bench</h3>
<p data-source-line="177">In this part of the project, you will start writing codes to generate stimuli so that we can test the functionality of majority_of_five circuit. To fully test the circuit, we need to simulate all the possible scenarios when five people get together and vote. As each of them can vote YES (represented by logic 1) and NO (represented by logic 0), there are a total of <eq><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>5</mn></msup><mo>=</mo><mn>3</mn><mn>2</mn></mrow><annotation encoding="application/x-tex">2^5=32</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathrm">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">5</span></span></span></span></span></span></span></span><span class="mrel">=</span><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span></eq> combinations. The following codes generate stimuli that covers all these 32 combinations.</p>
<pre><code class="hljs language-verilog"><span class="hljs-comment">// Declare loop index variable</span>
<span class="hljs-keyword">integer</span> k;

<span class="hljs-comment">// Apply input stimulus</span>
<span class="hljs-keyword">initial</span>
<span class="hljs-keyword">begin</span>
    sw = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (k=<span class="hljs-number">0</span>; k&lt;<span class="hljs-number">32</span>; k=k+<span class="hljs-number">1</span>)
        #<span class="hljs-number">20</span> sw = k;

    #<span class="hljs-number">20</span>	<span class="hljs-built_in">$finish</span>;
<span class="hljs-keyword">end</span>
</code></pre>
<p data-source-line="194">The <code>Initial</code> block is used here to code the stimulus generation. Initial block will be processed only once by the simulator. Before the initial block, we will define an integer <code>k</code>. Inside the initial block, we will initialize all the input to zero. A <code>for</code> statement is used to loop through all 32 combinations. One input pattern will be held at the input for 20 ns (using the delay command <code>#20</code>) before updating to the next input pattern. After cycling through all of the possible input patterns, the <code>$finish</code> command is used to end the simulation.</p>
<h3 data-source-line="196" id="finish-the-test-bench">Finish the Test Bench</h3>
<p data-source-line="198">Finally, we close the module as usual with endmodule.</p>
<pre><code class="hljs language-verilog"><span class="hljs-keyword">endmodule</span>
</code></pre>
<h3 data-source-line="203" id="check-your-test-bench">Check Your Test Bench</h3>
<p data-source-line="204">So the test bench should look like the following:</p>
<pre><code class="hljs language-verilog"><span class="hljs-meta">`<span class="hljs-meta-keyword">timescale</span> 1ns/ 1ps</span>

<span class="hljs-keyword">module</span> majority_of_five_test_fixture;

<span class="hljs-comment">// Inputs</span>
<span class="hljs-keyword">reg</span> [<span class="hljs-number">4</span>:<span class="hljs-number">0</span>] sw;
<span class="hljs-comment">// Outputs</span>
<span class="hljs-keyword">wire</span> led;

<span class="hljs-comment">// Instantiate the Unit Under Test (UUT)</span>
majority_of_five uut (
    <span class="hljs-variable">.sw</span>(sw),
    <span class="hljs-variable">.led</span>(led)
);

<span class="hljs-comment">// Declare loop index variable</span>
<span class="hljs-keyword">integer</span> k;

<span class="hljs-comment">// Apply input stimulus</span>
<span class="hljs-keyword">initial</span>
<span class="hljs-keyword">begin</span>
    sw = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (k=<span class="hljs-number">0</span>; k&lt;<span class="hljs-number">32</span>; k=k+<span class="hljs-number">1</span>)
        #<span class="hljs-number">20</span> sw = k;

    #<span class="hljs-number">20</span>	<span class="hljs-built_in">$finish</span>;
<span class="hljs-keyword">end</span>
</code></pre>
<h3 data-source-line="235" id="run-behavioral-simulation">Run Behavioral Simulation</h3>
<div class="row"><div class="col-md-5"><p>Now that the code is done, it is time to simulate. In the flow navigator on the left hand side of the window, under the <mark>Simulation</mark> heading click <mark>Run Simulation</mark> and select <mark>Run Behavioral Simulation</mark>.</p>
</div><div class="col-lg-7 col-md-6 col-sm-12"><figure><img alt="Figure 8. Run Behavioral Simulation" src="../images/cf221e6c16f5075688be46ab8ed65b80.png"/><figcaption>Figure 8. Run Behavioral Simulation</figcaption></figure>
</div></div><h3 data-source-line="247" id="check-waveform-in-simulator">Check Waveform in Simulator</h3>
<div class="row"><div class="col-md-5"><p>After the simulation runs, the Behavioral Simulation window will appear. Select the tab with an untitled name. Your simulation should look like the image shown in figure 9.</p>
</div><div class="col-lg-7 col-md-6 col-sm-12"><figure><img alt="Figure 9. Waveform Window" src="../images/250d8bd0349d9744b7d96b5e0451c53d.png"/><figcaption>Figure 9. Waveform Window</figcaption></figure>
</div></div><p data-source-line="260">In order to see the full simulation shown in the image below, you will need to click <mark>Zoom fit</mark> icon <img alt="" src="../images/68a04d8ef35cc1a35cb61d57b91d8e92.png"/> to zoom fit the simulation. Expand the sw section and you will be able to see the changing values of the switches as a waveform.</p>
<div class="row"><div class="col-md-5"><p>You can also put down a cursor, the yellow line, and this will show the current values. Notice where the cursor is in the image below: <mark>sw</mark> 4 through 2 are high, so <mark>led</mark> is high. You need to go through all the input patterns and make sure that the output signal works as expected.</p>
</div><div class="col-lg-7 col-md-6 col-sm-12"><figure><img alt="Figure 10. Behavioral Simulation of Majority of Five Logic" src="../images/2c405eb13d602dfb6b98f897a07fea0f.png"/><figcaption>Figure 10. Behavioral Simulation of Majority of Five Logic</figcaption></figure>
</div></div><div class="row"><div class="col-md-5"><p>In order to change how the values in the simulation window are displayed, you need to right click <code>sw[4:0]</code> signal value, move your cursor to <mark>Radix</mark>, and click on <mark>Binary</mark> as shown in figure 11. Now the displayed value of <code>sw[4:0]</code> is in binary (<mark>11100</mark>). You can also change the displayed values to decimal, hexadecimal, etc.</p>
</div><div class="col-lg-7 col-md-6 col-sm-12"><figure><img alt="Figure 11. Simulation Values of Majority of Five Logic" src="../images/515fff87b529ffb3009adeb9dfcf5db5.png"/><figcaption>Figure 11. Simulation Values of Majority of Five Logic</figcaption></figure>
</div></div><h2 data-source-line="285" id="requirements">Requirements</h2>
<h3 data-source-line="286" id="1-simulate-your-majority-of-five-circuit"><i aria-hidden="true" class="fa fa-check-square-o"></i> 1. Simulate your Majority of Five circuit</h3>
<p data-source-line="288">After going through your demo project, demonstrate your Majority of Five Simulation and prove its correctness.</p>
<h3 data-source-line="290" id="2-implement-majority-of-five-on-your-blackboard"><i aria-hidden="true" class="fa fa-check-square-o"></i> 2. Implement Majority of Five on Your Blackboard</h3>
<p data-source-line="292">After Proving the correctness of your design, go ahead and generate bitstream and launch it on your board. Then demonstrate the correctness of your design on your Blackboard.</p>
<h3 data-source-line="294" id="3-implement-majority-of-five-using-pos-equation"><i aria-hidden="true" class="fa fa-check-square-o"></i> 3. Implement Majority of Five using POS equation</h3>
<p data-source-line="296">Instead of using SOP in this tutorial, can you loop the compressed K-Map and come up with a logic expression in POS form and implement that in Verilog? Always remember to simulate it first before running implementation.</p>
<h2 data-source-line="299" id="next-project-temperature-indicator"><i aria-hidden="true" class="fa fa-sign-out"></i> Next Project: Temperature Indicator</h2>
<p data-source-line="300">If you are confident in doing this porject, go ahead and continue with the next <a class="btn btn-sm btn-default" href="https://www.realdigital.org/doc/c35ba3838179b0b10c482ceec0b34eba"><strong>PROJECT 3.2: Temperature Indicator</strong></a> for some extra practice!</p>
</div>
<div class="col col-toc">
<nav class="sticky-top sticky" id="doc-toc">
</nav>
</div>
</div>
</article>
</div>
<div aria-hidden="true" aria-labelledby="imagePreview" class="modal fade" id="docImagePreviewModal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg" role="document" style="max-width: 80vw;">

</div>
</div>
</div>
<footer class="page-footer center-on-small-only">
<div class="container-fluid">
<div class="footer-copyright">
            Copyright © 2018 realdigital.org. All Rights Reserved.<br/>
            Documents licensed <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license">CC SA 4.0</a>.
        </div>
</div>
</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js" type="text/javascript"></script>
<script src="/build/manifest.d41d8cd98f00b204e980.js" type="text/javascript"></script>
<script src="/build/realdigital.de4335d491c4f4582d5e.js" type="text/javascript"></script>
<script src="/build/js/app.b4b1f84db5840c3f9f81.js" type="text/javascript"></script>
<script>new WOW().init();</script>
</body>
</html>
